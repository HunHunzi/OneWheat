<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Storage | 一粒麦子</title>
    <meta name="generator" content="VuePress 1.9.10">
    <link rel="icon" href="/OneWheat/wheat.png">
    <meta name="description" content="一粒麦子不落在地里死了，仍旧是一粒。若死了，就结出许多子粒来。">
    
    <link rel="preload" href="/OneWheat/assets/css/0.styles.1c77ed66.css" as="style"><link rel="preload" href="/OneWheat/assets/js/app.5b92ea6c.js" as="script"><link rel="preload" href="/OneWheat/assets/js/2.8e3b7747.js" as="script"><link rel="preload" href="/OneWheat/assets/js/1.5a416044.js" as="script"><link rel="preload" href="/OneWheat/assets/js/25.df4d487b.js" as="script"><link rel="prefetch" href="/OneWheat/assets/js/10.db54c986.js"><link rel="prefetch" href="/OneWheat/assets/js/11.be71ba10.js"><link rel="prefetch" href="/OneWheat/assets/js/12.8aa070e7.js"><link rel="prefetch" href="/OneWheat/assets/js/13.352876c3.js"><link rel="prefetch" href="/OneWheat/assets/js/14.aa7e042f.js"><link rel="prefetch" href="/OneWheat/assets/js/15.b7440231.js"><link rel="prefetch" href="/OneWheat/assets/js/16.767a3a88.js"><link rel="prefetch" href="/OneWheat/assets/js/17.e290fa5a.js"><link rel="prefetch" href="/OneWheat/assets/js/18.baeb50d2.js"><link rel="prefetch" href="/OneWheat/assets/js/19.9f389a20.js"><link rel="prefetch" href="/OneWheat/assets/js/20.39d588d5.js"><link rel="prefetch" href="/OneWheat/assets/js/21.d04ba12b.js"><link rel="prefetch" href="/OneWheat/assets/js/22.dac4f624.js"><link rel="prefetch" href="/OneWheat/assets/js/23.8dda6a00.js"><link rel="prefetch" href="/OneWheat/assets/js/24.143f4846.js"><link rel="prefetch" href="/OneWheat/assets/js/26.fb57c640.js"><link rel="prefetch" href="/OneWheat/assets/js/27.1a8a3c85.js"><link rel="prefetch" href="/OneWheat/assets/js/28.e9c3cb52.js"><link rel="prefetch" href="/OneWheat/assets/js/29.05e81879.js"><link rel="prefetch" href="/OneWheat/assets/js/3.963f93b8.js"><link rel="prefetch" href="/OneWheat/assets/js/30.437ba86d.js"><link rel="prefetch" href="/OneWheat/assets/js/4.8d42542a.js"><link rel="prefetch" href="/OneWheat/assets/js/5.edbb760b.js"><link rel="prefetch" href="/OneWheat/assets/js/6.7a8bd171.js"><link rel="prefetch" href="/OneWheat/assets/js/7.93fcf6e6.js"><link rel="prefetch" href="/OneWheat/assets/js/vendors~docsearch.5a4296f1.js">
    <link rel="stylesheet" href="/OneWheat/assets/css/0.styles.1c77ed66.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/OneWheat/" class="home-link router-link-active"><img src="/OneWheat/wheat.png" alt="一粒麦子" class="logo"> <span class="site-name can-hide">一粒麦子</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/OneWheat/" class="nav-link">
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="基础知识" class="dropdown-title"><span class="title">基础知识</span> <span class="arrow down"></span></button> <button type="button" aria-label="基础知识" class="mobile-dropdown-title"><span class="title">基础知识</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/OneWheat/guide/basic/Javascript/" class="nav-link">
  JavaScript相关
</a></li><li class="dropdown-item"><!----> <a href="/OneWheat/guide/basic/Typescript/" class="nav-link">
  TypeScript相关
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="框架总结" class="dropdown-title"><span class="title">框架总结</span> <span class="arrow down"></span></button> <button type="button" aria-label="框架总结" class="mobile-dropdown-title"><span class="title">框架总结</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/OneWheat/guide/Frame/React/" class="nav-link">
  React相关
</a></li><li class="dropdown-item"><!----> <a href="/OneWheat/guide/Frame/Vue/" class="nav-link">
  Vue相关
</a></li></ul></div></div><div class="nav-item"><a href="/OneWheat/guide/Others/Hello.html" class="nav-link">
  碎碎念
</a></div><div class="nav-item"><a href="/OneWheat/guide/Basic/Javascript/.html" class="nav-link">
  MyBlog
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/OneWheat/" class="nav-link">
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="基础知识" class="dropdown-title"><span class="title">基础知识</span> <span class="arrow down"></span></button> <button type="button" aria-label="基础知识" class="mobile-dropdown-title"><span class="title">基础知识</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/OneWheat/guide/basic/Javascript/" class="nav-link">
  JavaScript相关
</a></li><li class="dropdown-item"><!----> <a href="/OneWheat/guide/basic/Typescript/" class="nav-link">
  TypeScript相关
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="框架总结" class="dropdown-title"><span class="title">框架总结</span> <span class="arrow down"></span></button> <button type="button" aria-label="框架总结" class="mobile-dropdown-title"><span class="title">框架总结</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/OneWheat/guide/Frame/React/" class="nav-link">
  React相关
</a></li><li class="dropdown-item"><!----> <a href="/OneWheat/guide/Frame/Vue/" class="nav-link">
  Vue相关
</a></li></ul></div></div><div class="nav-item"><a href="/OneWheat/guide/Others/Hello.html" class="nav-link">
  碎碎念
</a></div><div class="nav-item"><a href="/OneWheat/guide/Basic/Javascript/.html" class="nav-link">
  MyBlog
</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Storage</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/OneWheat/guide/Basic/Javascript/Storage.html#存储形式分类" class="sidebar-link">存储形式分类</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/OneWheat/guide/Basic/Javascript/Storage.html#web-storage" class="sidebar-link">Web Storage</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/OneWheat/guide/Basic/Javascript/Storage.html#cookie" class="sidebar-link">Cookie</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/OneWheat/guide/Basic/Javascript/Storage.html#indexeddb" class="sidebar-link">IndexedDB</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/OneWheat/guide/Basic/Javascript/Storage.html#安全性问题" class="sidebar-link">安全性问题</a></li></ul></li><li><a href="/OneWheat/guide/Basic/Javascript/Storage.html#推荐阅读" class="sidebar-link">推荐阅读：</a><ul class="sidebar-sub-headers"></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="storage-存储"><a href="#storage-存储" class="header-anchor">#</a> Storage(存储)</h1> <h2 id="存储形式分类"><a href="#存储形式分类" class="header-anchor">#</a> 存储形式分类</h2> <ol><li>Web Storage 包含两种形式：
<ul><li>localStorage</li> <li>sessionStorage</li></ul></li> <li>Cookie 包含两种形式：
<ul><li>普通 Cookie</li> <li>HttpOnly Cookie</li></ul></li> <li>IndexedDB 一种异步的 API ,可以访问支持索引的数据库
<br></li></ol> <h2 id="web-storage"><a href="#web-storage" class="header-anchor">#</a> Web Storage</h2> <p>Window 对象的 localStorage 和 sessionStorage 属性引用的是 Storage 对象，他与普通的 JavaScript 对象是否类似，但是丫的属性值必须是字符串，且它所存储的属性值是持久化的，允许在浏览器中存储键值对数据。存储的数据没有过期时间，直到手动去删除。</p> <ul><li><p>localStorage：</p> <ul><li>将数据永久存储在用户的浏览器中。是 Web 浏览器提供的一种用于在本地存储中持久保存数据的机制
-localStorage:localStorage 的生命周期是永久的，关闭页面或浏览器之后 localStorage 中的数据也不会消失。localStorage 除非主动删除数据，否则数据永远不会消失
<br></li></ul></li> <li><p>sessionStorage：</p> <ul><li>将数据保存在 session 对象中。是 Web 浏览器提供的一种用于在会话期间存储数据的方式，所谓 session，就是指用户在浏览某个网站时，从进入网站到浏览器关闭所经过的这段时间，也就是用户浏览这个网站所花费的时间。</li> <li>sessionStorage 的生命周期是在仅在当前会话下有效。- - sessionStorage 引入了一个“浏览器窗口”的概念，sessionStorage 是在同源的窗口中始终存在的数据。只要这个浏览器窗口没有关闭，即使刷新页面或者进入同源另一个页面，数据依然存在。但是 sessionStorage 在关闭了浏览器窗口后就会被销毁。同时独立的打开同一个窗口同一个页面，sessionStorage 也是不一样的。
<br></li></ul></li> <li><p>WebStorage 是仅在客户端（即浏览器）中保存，不参与和服务器的通信 他们的大小要比 cookies 大，一般为 5MB，而 cookies 只有 4KB 他们的存储空间比 cookies 大，但是不参与和服务器的通信(随着 HTTP header 发送到服务器端)，所以安全性比 cookies 高 并且由于不需要再从服务器获取数据，所以访问速度比 cookies 快</p></li></ul> <p><strong>_ 友情链接：[Wb Storage API] https://developer.mozilla.org/zh-CN/docs/Web/API/Web_Storage_API _</strong> <br></p> <p>####<font color="forestgreen"> seeionStorage or localStorage ?</font></p> <br>
- 总的来说，sessionStorage 适用于短期和会话级别的数据存储，而 localStorage 适用于长期和持久性的数据存储。如果希望存储的是 token(用户身份令牌)， 而令牌通常需要在用户退出登录之前持久保存，以便用户可以在多个会话之间保持登录状态。故推荐使用 localStorage，因为 localStorage 的性能比 sessionStorage 好，而且 localStorage 的数据不会随着浏览器窗口关闭而消失，除非主动删除数据，否则数据永远不会消失。
<br> <h2 id="cookie"><a href="#cookie" class="header-anchor">#</a> Cookie</h2> <br>
Cookie 是由 Web 服务器保存在 Web 浏览器上的小段文本信息，它会在浏览器下次向同一 Web 服务器再发起请求时被携带并发送到服务器上。通常，它用于告知服务端两个请求是否来自同一浏览器，如保持用户的登录状态。Cookie 使基于无状态的 HTTP 协议记录稳定的状态信息成为了可能。
<ul><li>Cookie 的生命周期可以通过两种方式定义：
会话期 Cookie 会在当前的会话结束之后删除。浏览器定义了“当前会话”结束的时间，一些浏览器重启时会使用会话恢复。这可能导致会话 cookie 无限延长。
持久性 Cookie 在过期时间（Expires）指定的日期或有效期（Max-Age）指定的一段时间后被删除。
<ul><li>注：当 Cookie 的过期时间（ Expires）被设定时，设定的日期和时间只与客户端相关，而不是服务端。
<br></li></ul></li> <li>cookie 由于只能需要和服务器通信，所以每次都会携带在 HTTP 头中，如果使用 cookie 保存过多数据会带来性能问题，并且原生的 cookief 不提供任何良好的 API，使用起来不方便 ，所以一般不直接使用 cookie，而是使用封装好的第三方库，比如 js-cookie
<br></li> <li>由于 cookie 存储在浏览器中，对客户端是可见的，客户端的一些程序可能会窥探、复制以至修正 Cookie 中的内容。可以在 cookie 中设置了 HttpOnly 属性，那么通过 js 脚本将无法读取到 cookie 信息，这样能有效的防止 XSS 攻击
<br></li></ul> <p><strong>_ 友情链接：[Cookie] https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Cookies _</strong></p> <h2 id="indexeddb"><a href="#indexeddb" class="header-anchor">#</a> IndexedDB</h2> <p>IndexedDB 是一种底层 API，用于在客户端存储大量的结构化数据（也包括文件/二进制大型对象（blobs））。该 API 使用索引实现对数据的高性能搜索。虽然 Web Storage 在存储较少量的数据很有用，但对于存储更大量的结构化数据来说力不从心。而 IndexedDB 提供了这种场景的解决方案。</p> <ul><li><p>数据库模型：
IndexedDB 是一个基于键值对的数据库模型，其中的数据以键值对的形式进行存储。</p></li> <li><p>异步操作：
与传统的同步数据库不同，IndexedDB 是一个异步的数据库。它使用事件来响应数据库操作的完成，而不会阻塞主线程。</p></li> <li><p>存储容量：
IndexedDB 的存储容量通常比 localStorage 大得多，可以存储数百兆字节的数据（取决于浏览器和设备）。</p></li></ul> <p><strong>_ 友情链接：[IndexedDB] https://developer.mozilla.org/zh-CN/docs/Web/API/IndexedDB_API _</strong> <br></p> <h3 id="安全性问题"><a href="#安全性问题" class="header-anchor">#</a> 安全性问题</h3> <ul><li>Web Storage 和 Cookie 都是保存在客户端的，所以不安全，不要在里面存储敏感信息，特别是用户信息，如密码等(之前项目就犯过这样的错)，它是直接通过浏览器查看到存储信息的</li> <li>关于更多的安全性问题，请参考友情链接(翻找了好久)</li></ul> <p><strong>_ 友情链接：https://blog.csdn.net/java_tang_shi_wen/article/details/115027687 _</strong></p> <p><strong>_ 友情链接：https://tech.meituan.com/2018/10/11/fe-security-csrf.html _</strong></p> <p><strong>_ 友情链接：https://github.com/Advanced-Frontend/Daily-Interview-Question/issues/31 _</strong> <br></p> <h2 id="推荐阅读"><a href="#推荐阅读" class="header-anchor">#</a> 推荐阅读：</h2> <ul><li>JavaScript 权威指南</li> <li>JavaScript 高级程序设计</li></ul></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/OneWheat/assets/js/app.5b92ea6c.js" defer></script><script src="/OneWheat/assets/js/2.8e3b7747.js" defer></script><script src="/OneWheat/assets/js/1.5a416044.js" defer></script><script src="/OneWheat/assets/js/25.df4d487b.js" defer></script>
  </body>
</html>
